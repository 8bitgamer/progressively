!function(e,t){"function"==typeof define&&define.amd?define(function(){return t(e)}):"object"==typeof exports?module.exports=t:e.progressively=t(e)}(this,function(e){"use strict";function t(e,t){var n={};for(var o in e)n[o]=t.hasOwnProperty(o)?t[o]:e[o];return n}function n(e){return null===e.offsetParent}function o(e,t){if(n(e))return!1;var o=e.getBoundingClientRect();return o.top>=0&&o.left>=0&&o.right<=(window.innerWidth||document.el.clientWidth)&&o.bottom<=(window.innerHeight||document.el.clientHeight)||e.clientHeight>=window.innerHeight}function i(e){setTimeout(function(){var t=new Image;t.onload=function(){e.classList.remove("progressive--not-loaded"),e.classList.add("progressive--is-loaded"),e.src=this.src,l(e)},t.src=e.dataset.progressive},c.delay)}function r(){s||(clearTimeout(s),s=setTimeout(function(){a.check(),a.render(),s=null},c.throttle))}var c,s,l,d,a={};return l=function(){},c={throttle:300,delay:100,onLoadComplete:function(){},onLoad:function(){}},a.init=function(n){n=n||{},c=t(c,n),l=c.onLoad||l,d=[].slice.call(document.querySelectorAll(".progressive__img")),a.render(),document.addEventListener?(e.addEventListener("scroll",r,!1),e.addEventListener("load",r,!1)):(e.attachEvent("onscroll",r),e.attachEvent("onload",r))},a.render=function(){for(var e,t=d.length-1;t>=0;--t)e=d[t],o(e)&&e.classList.contains("progressive--not-loaded")&&(i(e),d.splice(t,1));this.check()},a.check=function(){d.length||(c.onLoadComplete(),this.drop())},a.drop=function(){document.removeEventListener?e.removeEventListener("scroll",r):e.detachEvent("onscroll",r),clearTimeout(s)},a});